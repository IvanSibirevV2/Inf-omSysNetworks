<html>
<body background="fon2.bmp" bgproperties=fixed>
<p align=center><font size="6" face="Arial" color=green><b>Эталонная модель АТМ<br>Уровень адаптации AAL</b></font></p>
<hr>
<font color=navy>
<b>
<font color=black><b>Содержание</b></font>
<font color=blue><b>
<lu>
  <li><a href=#mark1>Функции уровня</a>
  <li><a href=#mark2>Типы ALL</a>
  <li><a href=#mark3>AAL 1</a>
  <li><a href=#mark4> AAL 2</a>
  <li><a href=#mark5>AAL 3/4</a>
  <li><a href=#mark6>AAL 5</a>
</lu>
</font>
<font color=navy>
<hr>

<a  name=mark1><p align=center><b><font color=red size=5><a href='10.htm'>Функции уровня AAL</a></b></font></p>

<p style='text-indent:20'>Уровень ALL сильнее связан с областям использования, чем уровень АТМ: он повышает качество обслуживания, предоставляемого уровнем АТМ, в соответствии с требованиями пользователя услугами, предназначен для преобразования трафика пользователя в протокольные блоки данных для их размещения в поле полезной нагрузки одного или нескольких смежных пакетов АТМ и наоборот.</p>

<p style='text-indent:20'>При этом каждый протокол уровня адаптации АТМ должен быть приспособлен к определенному классу трафика со своими специфическими характеристиками, определяющими уровень требований службы к временной и семантической прозрачности сети АТМ. Все функции уровня адаптации АТМ должны быть реализованы в терминальном оборудовании. Уровень адаптации АТМ принято делить на два подуровня:</p>

<lu>
  <li><a href=#mark11> подуровень сегментации и сборки (SAR - Segmentation and Reassembly Sublayer);</a>
  <li><a href=#mark12> подуровень конвергенции или слияния (CS - Convergence Sublayer).</a>
</lu>

<p style='text-indent:20'>Основными функциями <a name=mark11><font color=red>подуровня сегментации и сборки SAR</font> являются:</p>

<ol>
  <li>на передающей стороне - сегментация протокольных блоков данных вышележащего уровня в 48 октетов информационного поля ячейки АТМ;
  <li>на приемной стороне - сборка информационных полей ячеек в протокольный блок данных более высокого уровня;
</ol>

<p style='text-indent:20'>В свою очередь <a name=mark12><font color=red>подуровень конвергенции</font> может делиться на две части:</p>

<lu>
  <li>общую часть подуровня конвергенции (CPCS - Common Part Convergence Sublayer);
  <li>служебно-ориентированный подуровень конвергенции (SSCS – Service Specific Convergence Sublayer).
</lu>

<p style='text-indent:20'>При этом служебно-ориентированного подуровня конвергенции может не быть.</p>

<p style='text-indent:20'>Подуровень CS выполняет специальные функции обслуживания пользователя, при необходимости отвечает за обработку ошибок, для этого применяются протоколы для повторной передачи ошибочных данных или защищает данные, предоставляя приемнику возможность исправлять ошибки, обеспечивает синхронизацию из конца в конец.</p>

<a  name=mark2><p align=center><b><font color=red size=5><a href='10.htm'>Типы ALL</a></b></font></p>

<p style='text-indent:20'>Существует четыре типа AAL, которые стандартизируют скорость передачи битов, режим передачи (с соединением и без), взаимосвязь между тактовыми частотами источника и приемника:</p>

<lu>
  <li>AAL типа 1 для информации с постоянной скоростью передачи битов, которая требует строгой взаимосвязи между тактовыми частотами передачи и приема (например, эмуляция речевого канала);
  <li>AAL типа 2 для информации с переменной скоростью передачи битов, которая также требует строгой взаимосвязи между тактовыми частотами передачи и приема (например, видео с переменной скоростью передачи битов);
  <li>AAL типа 2 для информации с переменной скоростью передачи битов, которая также требует строгой взаимосвязи между тактовыми частотами передачи и приема (например, видео с переменной скоростью передачи битов);
  <li>AAL типа 5, который может рассматриваться как упрощенная версия AAL типа 3/4, но со схожими возможностями.
</lu>

<p style='text-indent:20'>Для наглядности уровень адаптации АТМ можно представить следующим образом:</p>

<p align=center><image src="image0Y1.gif"></p>

<a  name=mark3><p align=center><b><font color=red size=5><a href='10.htm'>Функции уровня адаптации AAL типа 1.</a></b></font></p>

<p style='text-indent:20'>Уровень адаптации AAL типа 1 используется в областях с очень жесткими требованиями к изохронности и постоянной скоростью передачи битов, таких как:</p>

<lu>
  <li> речевые сигналы;
  <li> звуковые сигналы высокого качества;
  <li> видеосигналы;
  <li> эмуляция каналов передачи данных.
</lu>

<p style='text-indent:20'>Роль AAL 1 состоит в том, чтобы дать возможность восстановить переданные импульсы синхронизации информации, компенсировать различия во времени распространения в сети и административно управлять потерями или случайными вставками ячеек. Он также позволяет использовать данные, структурированные в блоки, предоставлять средства для обработки ошибок.</p>

<p style='text-indent:20'>Для реализации этих функций используется один байт полезной нагрузки, оставляя 47 байт доступными для информации (рисунок 1). Этот байт включает порядковый номер SN (Sequence Number), используемый для обнаружения потерянных или случайно вставленных ячеек, и защиту порядкового номера SNP (Sequence Number Protection). Поле SNP делится на два:</p>

<ol>
  <li>3-битовой код CRC для исправления одиночных ошибок;
  <li>бит четности для обнаружения двойных ошибок.
</ol>

<p style='text-indent:20'>Поле SN также делится на два:</p>

<ol>
  <li>бит индикации подуровня конвергенции СSI (Convergence Sublayer Indication) может содержать метку остаточного времени RTS (Residual Time Stamp), которая используется для установки синхронизации приемника. Она может быть также использована для выделения блоков данных.
  <li>три бита содержат счетчик для нумерации ячеек (по модулю 8).
</ol>

<p align=center><image src="image0Y2.gif"></p>
<p align=center></b>Рисунок 1<b></p>

<p style='text-indent:20'>Для некоторых областей использования с непрерывными потоками, таких как эмуляция каналов передачи данных или звуковые сигналы высокого качества, необходимо точно восстановить принятую информацию и для этого полностью устранить джиттер ячеек. Чтобы достичь этого, приемник должен накапливать информацию, принимаемую за интервал времени, который по меньшей мере равен времени распространения плюс максимальное значение джиттера (рисунок 2).</p>

<p style='text-indent:20'>Передача асинхронного типа, такая как АТМ, не дает сетевой синхронизации возможности управления синхронизацией источника. Поэтому синхронизацию источника должен восстанавливать приемник. Для этого поток ячеек должен содержать временную метку (RTS), задаваемую эталонной частотой синхронизации. Данный метод требует использования общего эталона синхронизации, получаемого из нижележащей транспортной сети (например, SDH). Эта 4-битовая временная метка переносится битом CSI одной из двух ячеек, принадлежащих группе из восьми последовательных ячеек (ячейки с нечетными номерами).</p>

<p style='text-indent:20'>В случае речевого или видеосигналов обычно нет необходимости использовать предыдущий способ, называемый синхронной остаточной временной меткой SRTS (Synchronous Residual Time Stamp), и приемник может восстанавливать синхронизацию источника приблизительно, исходя из ритма, с которым наполняется память буферов. Средняя скорость наполнения приемника используется для установки начальной задержки выборки ячеек. Если скорость наполнения растет, то скорость выборки увеличивается, а если скорость наполнения падает, то скорость выборки уменьшается.</p>

<p align=center><image src="image0Y3.gif">
<p align=left><font color=black>ТЗ: Задержка передачи<br>
MJ: Максимальный джиттер ячейки</font></p>
<p align=center></b>Рисунок 2<b></p>

<p style='text-indent:20'>Подуровень сведения AAL типа 1 может также нести ответственность за обработку ошибок (одиночных или многократных) при передаче полезной нагрузки, а также за потери или случайные вставки целых ячеек, обнаруживаемых на подуровне сегментации и сборки. Режим обработки и его характеристики зависят от типа службы пользователя. Так, в случае эмуляции канала передачи данных и при условии, что коэффициент ошибок и коэффициент потери ячеек очень малы, ошибки могут быть обработаны действующими из конца в конец протоколами без вмешательства уровня AAL; в то же время никакая обработка не требуется для телефонной службы.</p>

<p style='text-indent:20'>Простое обнаружение потери ячейки с последующей повторной передачей непригодно для приложений реального времени, поскольку может привести к неограниченному времени ответа. Однако его можно увязать с маскированием ошибок с помощью механизма интерполяции принятой информации. Маскирование особенно эффективно, если данные перемежаются на передаче, поскольку это позволяет ослабить эффекты от потери ячеек.</p>

<p style='text-indent:20'>Если маскирование ошибок недостаточно удовлетворяет требованиям службы пользователя (например, в случае видеосигналов или звуковых сигналов высокого качества), исходная информация может быть восстановлена с помощью метода прямого исправления ошибок (FEC), который может быть объединен с механизмом перемежения.</p>

<a  name=mark4><p align=center><b><font color=red size=5><a href='10.htm'>Функции уровня адаптации AAL типа 2.</a></b></font></p>

<p style='text-indent:20'>Услуги, которые предоставляются уровнем адаптации 2-го типа верхнему уровню, включают:</p>

<ol>
<li> перенос блоков данных служб с изменяющейся скоростью передачи источников; 
<li> обеспечение синхронизации между источником и получателем информации; 
<li> оповещение о потерянной или ошибочной информации, которая не восстанавливается уровнем адаптации АТМ. 
</ol>

<p style='text-indent:20'>Для реализации вышеперечисленных услуг уровень адаптации АТМ 2-го типа выполняет следующие основные функции:</p>

<ol>
<li> сегментацию и сборку пользовательской информации: 
<li> сглаживание джиттера задержки пакетов АТМ: 
<li> выявление потерянных и неправильно вставленных пакетов АТМ; 
<li> восстановление в приемнике тактовой частоты источника; 
<li> контроль битовых ошибок и исправление одиночных в управляющей информации протокола уровня адаптации АТМ.
</ol>

<p style='text-indent:20'>Так как источник информации является источником с изменяющейся скоростью передачи, то пакеты АТМ могут заполняться не полностью, а уровень заполнения от пакета к пакету может меняться. Все это требует, чтобы в подуровне сегментации и сборки уровня адаптации АТМ 2-го типа выполнялось больше функций, чем при уровне адаптации АТМ 1-го типа.</p>

<p style='text-indent:20'>Формат протокольного блока данных подуровня сегментации и сборки уровня адаптации АТМ 2-го типа состоит из следующих полей (рисунок 3): SN (Sequence Number) - номер последовательности, IT (Information Type) - тип информации, LI (Length Indicator) - индикатор длины заполнения информационной части, CRC (Cyclic Redundancy Code) - циклический избыточный код.</p>

<p align=center><image src="image0Y4.gif"></p>
<p align=center></b>Рисунок 3<b></p>

<p style='text-indent:20'>Поле номера последовательности (SN) позволяет обнаруживать потерянные или пришедшие не по адресу пакеты АТМ. Определенные значения номера последовательности могут служить особым целям.</p>

<p style='text-indent:20'>Поле типа информации (IT - Information Type) используется для обозначения того, что в протокольном блоке содержится начало сообщения (ВОМ - Beginning of Message), продолжение сообщения (СОМ - Continuaion of Message), завершение сообщения (ЕОМ - End of Message) или блок транспортирует информацию синхронизации, а также компоненты видео или аудио сигналов.</p>

<p style='text-indent:20'>Поле индикатора длины (LI) показывает число октетов полезной нагрузки в информационном поле частично заполненного протокольного блока данных подуровня сегментации и сборки.</p>

<p style='text-indent:20'>Поле с циклическим избыточным кодом (CRC) предназначено для обнаружения и исправления ошибок.</p>

<a  name=mark5><p align=center><b><font color=red size=5><a href='10.htm'>Функции уровня адаптации AAL типа 3/4.</a></b></font></p>

<p style='text-indent:20'>Функция адаптации AAL типа 3/4 работает или в режиме, ориентированном на соединения, или в режиме без соединения, в котором блоки данных (дейтаграммы) маршрутизируются независимо друг от друга. Перенос потока в режиме, ориентированном на соединения, может либо гарантироваться сетью, либо нет.</p>

<ul>
<li> В гарантированном режиме AAL типа 3/4 используется управление потоком и функции повторной передачи пропущенных или ошибочных блоков.
<li> В негарантированном режиме эти функции должны быть реализованы на верхних уровнях.
</ul>
<p style='text-indent:20'>Эти функции адаптации принимают блоки данных максимальной длиной 65535 байт и обеспечивают два уровня приоритета: обычный приоритет и высший приоритет.</p>

<p align=center><image src="image0Y5.gif"></p>
<p align=center></b>Рисунок 4<b></p>

<p style='text-indent:20'>Как показано на рисунке 4, подуровень сведения состоит из двух частей: подуровня конвергенции общей части <font color=red>CPCS</font> (Common Part Convergence Sublayer) и подуровня конвергенции для конкретной службы <font clor=red>SSCS</font> (Service Specific Convergence Sublayer). Функции, относящиеся к гарантированному и негарантированному режимам услуги, ориентированной на соединения, выполняются в этой последней части.</p>

<p style='text-indent:20'><font color=red>Подуровень CPCS</font> выполняет следующие функции:</p>
<lu>
<li> выделение служебного блока данных CPCS-SDU (Service Data Unit);
<li> обнаружение ошибок (в некоторых случаях пораженные CPCS-SDU могут быть переданы на верхние уровни с индикатором ошибки, если они не отброшены);
<li> информирование приемника о памяти, необходимой для приема CPCS-SDU;
<li> передача сообщения прерывания.
</lu>
<p style='text-indent:20'>Функции CPCS обеспечивают поддержку как сервису без соединений, так и сервису, ориентированному на соединения.</p>

<p style='text-indent:20'>Значащими полями <font color=red>CPCS-SDU</font> являются (рисунок 5):</p>
<lu>
<li> индикатор общей части <font color=black>CPI</font> (поле, указывающее, как должны интерпретироваться последующие поля);
<li> индикаторы начала и конца <font color=black>Btag</font>, <font color=black>Etag</font>, которые используются для предотвращения случайного сцепления двух СPCS-SDU, возникающего из-за потери ячеек, несущих конец первого блока данных и начало второго;
<li> индикатор <font color=black>BASize</font> размера CPCS-SDU, который указывает приемнику, сколько буферной памяти следует зарезервировать (благодаря этому приемник не должен систематически резервировать максимальный размер буферной памяти, равный 64 Кбайт);
<li> дополнение <font color=black>AL</font> (Aligmcnt - выравнивание) для доведения размера CPCS-SDU до 32 бит;
<li> индикатор <font color=black>Length</font> окончательного размера CPCS-SDU, который дает точное значение длины полезной нагрузки, благодаря чему дополнение может быть исключено.
</lu>

<p align=center><image src="image0Y6.gif"></p>
<p align=center></b>Рисунок 5<b></p>

<p style='text-indent:20'><font color=red>Подуровень SAR</font> гарантирует целостность полезной нагрузки ячейки и обеспечивает функции группирования или разделения и сегментации или сборки: блоки (CS-PDU), которые меньше полезной нагрузки ячейки, группируются, тогда как блоки, большие полезной нагрузки, сегментируются. Поля, которые предоставляются для этих функций административного управления, занимают 4 байта в ячейке, что снижает полезную нагрузку до 44 байт (рисунок 6). Следует отметить, что этот размер полезной нагрузки, кратный 4 байтам, адаптирован для использования 32-битовых процессоров.</p>

<p align=center><image src="image0Y7.gif"></p>
<p align=center></b>Рисунок 6<b></p>

<p style='text-indent:20'>Поля подуровня SAR включают:</p>
<ul>
<li> индикатор типа сегмента <font color=black>ST</font> (Segment Type): начало (10), продолжение (00) или конец (01) сообщения или односегментное сообщение (11);
<li> порядковый номер <font color=black>SN</font> (Sequence Number) по модулю 16 для обнаружения потерянных или вставленных ячеек;
<li> указатель приоритета для передачи высокоприоритетного SAR-PDU раньше такого же блока с обычным приоритетом;
<li> указатель распознавания способа мультиплсксирования <font color=black>MID</font> (Multiplexing Identification) для идентификации ячеек, принадлежащих к различным потокам данных (максимум 512), мультиплексированных в одном и том же виртуальном соединении;
<li> указатель длины <font color=black>LI</font> (Length Indicator), несущий число байтов (от 1 до 44), используемых в ячейке;
<li> 10-битовую проверочную часть циклического избыточного кода <font color=black>CRC</font>, идентичного коду, используемому функции адаптации AAL типа 2.
</ul>

<p style='text-indent:20'>Для передачи сообщения прерывания используется специальное кодирование SAR-PDU: в поле типа сегмента устанавливается метка "конец сообщения", а полезная нагрузка равна нулю, так же как и в поле <font color=black>LI</font>.</p>

<p style='text-indent:20'>Если сеть ретрансляции ячеек предоставляет услугу без соединения, то она должна реализовывать дополнительные функции для гарантированной маршрутизации дейтаграмм <font color=black>CLSF</font> (ConnectionLess Service Function - функция услуги без соединения). Эти функции определены на более высокой уровне, чем AAL типа 3/4, который используется в незащищенном режиме <font color=black>CLNAP</font> (ConnectionLess Network Accesi Protocol - протокол доступа к сети без соединения) (рисунок 7).</p>

<p style='text-indent:20'>Этот набор протоколов очень похож на набор, определенный стандартом DQDB: адреса, основанные на плане нумерации, определенном рекомендацией Е.164, проверка правильности адресов, поддержка адресных групп и т. д.</p>

<p align=center><image src="image0Y8.gif"></p>
<p align=center></b>Рисунок 7<b></p>

<p style='text-indent:20'>Основными полями уровня CLNAP являются:</p>
<lu>
<li> <font color=black>адреса источника и получателя</font> дейтаграмм, необходимые для маршрутизации;
<li> поле идентификатора протокола верхнего уровня <font color=black>HLPI</font> (Higher Layer Protocol Identifier);
<li> индикатор качества обслуживания <font color=black>QoS</font> (Quality of Service);
<li> необязательный код <font color=black>CRC</font> для обнаружения ошибок.
</lu>

<a  name=mark6><p align=center><b><font color=red size=5><a href='10.htm'>Функции уровня адаптации AAL типа 5.</a></b></font></p>

<p style='text-indent:20'>AAL типа 5 можно рассматривать как упрощенную версию AAL типа 3/4. Его целью является передача потоков данных, выполняемая блоками переменной длины с максимальной длиной 65535 байт в режиме, ориентированном на соединения.</p>

<p style='text-indent:20'>Передаваемый пользователем блок данных AAL типа 5 дополняется так, чтобы его можно было разделить на целое число ячеек; тогда длина полученного блока будет кратна 48 байтам, а длина дополнения - находиться между 0 и 47 байтами. Последняя ячейка содержит 8 байт, предназначенных для трех различных функций:</p>
<lu>
<li> индикатора длины (16 бит), который используется приемником для определения полезном нагрузки данных;
<li> 32-битового кода CRC, используемого для обнаружения ошибок в передаваемых данных;
<li> 16 бит, зарезервированных для будущего. 
</lu>
<p style='text-indent:20'>Поскольку все 48 байт полезной нагрузки заняты данными пользователя, функция AAL типа 5 нс может предоставить какие-нибудь явные указатели начала и конца блока данных. Последняя ячейка блока данных помечается с помощью последнего бита поля PTI (тип SDU=1) в заголовке АТМ. Поэтому первая ячейка блока данных задается в явной форме, как следующая за последней ячейкой предыдущего блока, которая определена в неявном виде (рисунок 8).</p>


<p align=center><image src="image0Y9.gif"></p>
<p align=center></b>Рисунок 8<b></p>

<p style='text-indent:20'>Функция AAL типа 5 адаптирована к аппаратной реализации на подуровне CPCS. Ее преимуществами являются полная полезная нагрузка ячеек и эффективная защита блока данных с помощью 32-битового кода CRC. Однако она не обеспечивает обнаружения ошибок в последовательных ячейках или мультиплексирования нескольких потоков.</p>

<p style='text-indent:20'>Вывод:</p>
<p align=center><font size=5>Порядок формирования ячеек разными уровнями AAL</font></p>

<p align=center><image src="image0Y10.gif"></p>
<p align=center></b>Рисунок 9<b></p>

<p align=right><a href='10.htm'>Перейти в начало</a></p>
</b>
</font>
</body>
</html>